<?php
	include('controlador/genericCtl.php');
	class AlumnoCtl extends generic{
		/*atributos*/
		public $modelo;
		
		/*constructor*/
		function __construct($driver) {
			/*cargar modelo*/
			require_once("modelo/alumnoMdl.php");
			$this->modelo = new AlumnoMdl($driver);
		}
	
		function ejecutar() {
			/*recibir acciÃ³n*/
			switch($_GET["acc"]) {
				case "alta":
					if(empty($_POST)){
					/*	require_once("vista/registro.html");*/
						self::generarVista('registro.html',true);
					}
					 else {
					 	/*obtener datos de POST*/
					 	/*$codigo = $con->real_escape_string($_POST["codigo"]);*/
					 	$codigo = $_POST["codigo"];
					 	$nombre = $_POST["nombre"];
					 	$apellidos = $_POST["apellido"];
					 	$correo = $_POST['correo'];
					 	$carrera = $_POST['carrera'];
					 	unset($_POST);
						$resultado = $this->modelo->alta($codigo,$nombre,$apellidos, $correo, $carrera);
						if($resultado !== false){
							/*require_once("vista/listaAlumnoView.html");*/
							self::generarVista('listaAlumnoView.html');
						}else{
							require_once("vista/error.html");
						}
					}
				break;
			}
		}
	}
?>
